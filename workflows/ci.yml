 name: CI â€” Build & Push Docker
 on:
 push:
 branches: ["main", "master", "develop", "feature/**"]
 workflow_dispatch:
 env:
 IMAGE: ${{ secrets.DOCKERHUB_USERNAME }}/devops-webapp
 jobs:
 build_test_push:
 runs-on: ubuntu-latest
 steps:- uses: actions/checkout@v4- name: Set up Python
 uses: actions/setup-python@v5
 with:
 7
python-version: '3.11'- name: Install test deps
 working-directory: app
 run: |
 python -m pip install --upgrade pip
 pip install -r requirements.txt
 pytest -q- name: Set up Docker Buildx
 uses: docker/setup-buildx-action@v3- name: Log in to Docker Hub
 uses: docker/login-action@v3
 with:
 username: ${{ secrets.DOCKERHUB_USERNAME }}
 password: ${{ secrets.DOCKERHUB_TOKEN }}- name: Build & Push (latest + sha)
 uses: docker/build-push-action@v6
 with:
 context: ./app
 push: true
 tags: |
 ${{ env.IMAGE }}:latest
 ${{ env.IMAGE }}:${{ github.sha }}